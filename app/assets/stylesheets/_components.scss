// Components
// ----------

// Homepage components
// --------------------------------------------------------
.home-header {
	@extend %vertical-bar-fixed;
	width: 469px;
	background: transparent url('bg-home.jpg') no-repeat left bottom;
	background-size: 468px 726px;
	left: 0;
}

.home-title {
	position: absolute;
	bottom: 151px;
	right: 17px;
	a {
		@extend %hidden-text;
		display: block;
		@include background-2x(logo-ddh, 197px, 922px);
	}
}

.byline {
	@extend %hidden-text;
	@include background-2x(byline, 254px, 151px);
	position: absolute;
	bottom: 52px;
	right: 0;
}

// TODO modify positioning on small screens & fix left margin
.home-content {
	width: 480px;
	padding-bottom: 197px;
	// margin: 0 0 $space 598px;
	margin: 0 0 $space 50%;
	// position: relative;
	position: absolute;
	bottom: 0;
	left: 0;
}

.nav-start {
	@extend %beta;
	@extend %loose-top-space;
	a {
		@extend %home-link;
	}
}

// Homepage navigation
// --------------------------
// <ul>
.nav-primary {
	@extend %nav;
	position: absolute;
	bottom: 0;
	left: 0;
}

// <ul>
.nav-footer {
	@extend %floated-list;
	margin-bottom: 10px;
	position: absolute;
	bottom: 0;
	right: 0;
	a {
		@extend %hidden-text;
	}
	.logo-cuny {
		@include background-2x(logo-cuny, 101px, 181px);
	}
	.logo-umn {
		@include background-2x(logo-umn, 69px, 183px);
	}
	.logo-gcdi {
		@include background-2x(logo-gcdi, 123px, 185px);
	}

}

// Interior page components
// --------------------------------------------------------
.page-header {
	@extend %vertical-bar-fixed;
	width: 160px;
	background-color: $black;
	padding: ($space * 2) $shim 0;
	left: 0;
	.nav-open & {
		@include respond-max(1092px) {
			width: 14.9%;
		}
	}
}

.interior-title {
	position: absolute;
	bottom: $shim * 2;
	right: 0;
	left: 0;
	a {
		@extend %hidden-text;
		display: block;
		@include background-2x(logo-ddh, 186px, 870px);
		margin: 0 auto;
	}
}

// TODO adjust margin-left on small screens
.interior-content {
	@extend %smooth-resize;
	width: 508px;
	padding: ($space * 2) 0;
	margin-left: 29%;
	.nav-open & {
		@include respond-max(1550px) {
			margin-left: 20%;
		}
		@include respond-max(1160px) {
			margin-left: 196px;
		}
		@include respond-max(1092px) {
			width: 47%;
		}
	}
}

// Chapter
// --------------------------
.chapter {
	position: relative;
	p {
	}
}

.chapter-heading {
	@extend %beta;
	margin-bottom: 1em;
}

.chapter-section {
	margin-bottom: 25px;
	.figure {
		margin-top: 1em;
		margin-bottom: 1em;
	}
	img {
		margin-top: 1em;
		margin-bottom: 1em;
		max-width: 508px;
	}
	p.rf, p.en {
		margin-bottom: 1em;
		text-indent: 0;
		/* Force linebreaks on long URLs */
		a {
			white-space: pre;           /* CSS 2.0 */
			white-space: pre-wrap;      /* CSS 2.1 */
			white-space: pre-line;      /* CSS 3.0 */
			white-space: -pre-wrap;     /* Opera 4-6 */
			white-space: -o-pre-wrap;   /* Opera 7 */
			white-space: -moz-pre-wrap; /* Mozilla */
			white-space: -hp-pre-wrap;  /* HP Printers */
			word-wrap: break-word;      /* IE 5+ */
		}
	}
	p.ah {
		font-style: italic;
		font-weight: bold;
		margin-top: 1em;
		margin-bottom: 1em;
		text-indent: 0;
	}
	p.bh {
		font-weight: bold;
		margin-top: 1em;
		margin-bottom: 1em;
		text-indent: 0;
	}
	p.ch {
		font-style: italic;
		margin-top: 1em;
		margin-bottom: 1em;
		text-indent: 0;
	}
	h3 {
		margin-bottom: 1em;
	}
	.epigraph {
		margin-top: 1em;
		margin-bottom: 1em;
		font-style: italic;
		.ept, .quotail {
			margin-bottom: 1em;
			margin-top: .5em;
			text-indent: 0;
		}
	}
	p.bqs, div.list {
		margin: 2em;
		p {
			text-indent: 0;
		}
	}
}

.chapter-body {
	@include justify;
}

.chapter-notes {
	p {
		@extend %delta;
	}
	.enp {
		margin-bottom: 25px;
	}
}

.chapter-bibliography {
	p {
		@extend %delta;
	}
}

span.hover {
	background-color: #FBF330;
}
span.sentence {
	cursor: pointer;
	&:hover {
		background-color: #FBF330;
	}
}


// Interior navigation
// --------------------------
// <ul>
.nav-interior {
	@extend %nav;
}

.nav-content {
	@extend %vertical-bar-fixed;
	@extend %smooth-resize;
	width: $navOpenWidth;
//	background-color: $grayLight;
	right: 0px;
//	overflow: hidden;
//	.nav-open & {
//		width: $navOpenWidth;
//		@include respond-max(1092px) {
//			width: 31%;
//		}
//	}
//	.nav-panes--toggle {
//		position: relative;
//		height: 100%;
//		width: 34px;
//		z-index: 10;
//	}
//
}

.nav-content--control {
//	color: inherit;
//	position: absolute;
//	bottom: 20px;
//	right: 20px;
//	z-index: 10;
//	&:focus {
//		outline: 0;
//	}
}

.nav-panes {
	height: 100%;
	position: relative;
}
// <ul>
// Lives inside nav-content

.nav-pane {
	@extend %delta;
	position: relative;
	@extend %unstyled-list;
	li.level-0, li.level-1 {
		@extend %vertical-bar;
		width: $navOpenWidth;
		background-color: $grayLight;
		margin-bottom: 4px;
		@include box-shadow(
			inset $navClosedWidth 0 0 0 $grayLight,
			inset ($navClosedWidth + 4) 0 0 0 $white
		);
	}
	li.level-1 {
		position: relative;
		height: 100%;
		border-left: 4px solid $white;
		width: $navOpenWidth * 2;
		border-bottom: 4px solid $white;
		left: $navOpenWidth + 0px;
	}
}

// <li>
// Lives inside nav-panes
.pane--content {
	@extend %delta;
	width: 100%;
	line-height: $tightLineHeight;
	padding: 40px 20px 30px 50px;
	.pane-top & {
		padding-top: 160px;
	}
	height: 100%;
	& .part {
		margin-bottom: 50px;
		@extend %clearfix;

	}
	& .parts {
		position: relative;
	}
}

.pane--vertical-stage {
	overflow: hidden;
}

.pane-top {
	height: 40%;
	right: 0;
}

.pane-bottom {
	&.reveal-level-0 {
		right: 0;
	}
	&.reveal-level-1 {
		right: ($navOpenWidth * 2) + 4px;
	}
	&.reveal-level-2 {
		right: ($navOpenWidth * 2) + 4px;
	}

	height: 60%;
	top: 0;
}

.pane--header {
	.pane-top & {
		padding-top: 180px;
	}
	cursor: pointer;
	@extend %vertical-bar;
	width: $navClosedWidth;
	left: 0;
	white-space: nowrap;
}

// Width set to height of parent (pane--header)
// with javascript
// Bottom positioning = line-height + padding,
// which makes up for offset due to rotation axis
.pane--title {
	@extend %with-gray-dark;
	@extend %epsilon;
	// TODO: Scott to figure out why I need to hard-code the size here instead
	// of having it be picked up from %epsilon as it probably should be. -ZD
	font-size: 11px !important;
	@include rotate(-90deg, top left);
	line-height: 1;
	text-align: center;
	padding-top: 13px;
	position: absolute;
	bottom: -24px;
	left: 0;
	overflow: hidden;
}

// Highlight navigation
// --------------------------
// <ul>
.nav-highlight {
	@extend %unstyled-list;
	@include spaced-items(li, 12px);
	margin-top: 16px;
	a {
		display: inline-block;
	}
}

// <a>
.highlight-emphasis {
	@extend %circle-item-blue;
}

// <a>
.highlight-mark {
	@extend %circle-item;
}

// Count Box
// --------------------------
// <div>
.count-box {
	margin-top: 18px;
	width: 78px;
	background-color: $gray;
	float: left;
	padding: 10px;
	margin-right: 10px;
	.num {
		@extend %alpha;
	}
	h6 {
		height: 50px;
		text-transform: uppercase;
		margin: 0;
		font-weight: normal;
	}
}



// Table of contents
// --------------------------
// <ul>
.nav-index {
	@extend %unstyled-list;
	@include spaced-items(li, 17px);	
	li:first-child {
		margin-top: 0;
	}
	a {
		line-height: $tightLineHeight;
		color: $grayDark;
		&:hover, 
		&.active {
			color: $black;
		}
		span {
			display: block
		}
	}
	span.author {
		font-weight: 600;
	}
	ul {
		&.closed {
			display: none;
		}
		margin-top: 15px;
		padding-left: 15px;
	}
}
.nav-index-col {
	&:last-child {
		margin-left: 50px;		
	}
	width: $navOpenWidth - 62;
	float: left;
}

// The floating annotator
// --------------------------------------------------------
// <div>
.annotator {
	@extend %delta;
	width: 320px;
	background-color: $gray;
	border: 2px solid white;
	position: absolute;
	top: 0;
	left: 0;
	z-index: 10;
	&:before {
		content: "";
		border: 15px solid transparent;
		border-top: 28px solid $gray;
		position: absolute;
		bottom: -43px;
		left: 26px;
		z-index: 14;
	}
	&:after {
		content: "";
		border: 17px solid transparent;
		border-top: 32px solid $white;
		position: absolute;
		bottom: -49px;
		left: 24px;
		z-index: 12;
	}
}

// Annotator sections
// --------------------------
.annotator--top {
	font-style: italic;
	color: $grayDark;
	background-color: $gray;
	padding: 0.5em 1em;
	border-bottom: 2px solid $white;
}

// Expands to 316px wide
.annotator--right {
	color: $white;
	width: 125px;
	background-color: darken($gray, 30%);
	padding: 0.5em;
	border: 2px solid $white;
	position: absolute;
	left: 191px; 
	top: -2px;
	bottom: -2px;
	z-index: 10;
}

.annotator--left {
	background-color: $gray;
	position: relative;
	z-index: 20;
}

// Bottom
// --------------------------
// <ul>
.annotator--bottom {
	@extend %clearfix;
	@extend %unstyled-list;
	padding: 1em;
	li {
		@extend %pull-left;
		cursor: pointer;
	}
}

// <li>
.annotate-interesting {
	@extend %circle-item-small-blue;
}

// <li>
.annotate-index {
	@extend %circle-item-small-orange;
	margin-left: 1em;
}

.annotate-index-input {
	padding-left: 15px;
	padding-right: 15px;
}


// <li>
.annotate-close {
	padding-left: 30px;
	margin-top: 10px;
	position: relative;
}

.annotate-close--x {
	font-weight: 300;
	position: absolute;
	top: 0;
	left: 5px;
}

// Annotation flag
// Seen to the left of text
// --------------------------
.annotation {
	display: block;
	width: 5px;
	height: 10px;
	background: $blueDark;
	position: absolute;
	left: -100px;
}

